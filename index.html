<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Minimal Shop</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="site-header">
        <div class="container header-inner">
            <h1 class="brand">Minimal Shop</h1>
            <div class="actions">
                <button id="cart-button" class="cart-btn" aria-label="Open cart">
                    ðŸ›’ <span id="cart-count" class="cart-count">0</span>
                </button>
            </div>
        </div>
        <p class="tagline">Sleek, simple, single-page eâ€‘commerce demo</p>
    </header>

    <main class="container">
        <section class="products-section">
            <h2 class="section-title">Products</h2>
            <div id="products" class="products-grid" aria-live="polite"></div>
        </section>
    </main>

    <aside id="cart-drawer" class="cart-drawer" aria-hidden="true">
        <div class="cart-header">
            <h3>Cart</h3>
            <button id="close-cart" class="close-btn" aria-label="Close cart">âœ•</button>
        </div>
        <div id="cart-items" class="cart-items"></div>
        <div class="cart-footer">
            <div class="cart-total">Total: $<span id="cart-total">0.00</span></div>
            <button id="checkout-btn" class="primary">Checkout</button>
        </div>
    </aside>

    <div id="overlay" class="overlay" hidden></div>

    <!-- Product modal -->
    <div id="product-modal" class="modal" aria-hidden="true">
        <div class="modal-content">
            <button id="close-modal" class="close-btn">âœ•</button>
            <div class="modal-body">
                <img id="modal-image" src="" alt="" class="modal-image">
                <div class="modal-info">
                    <h3 id="modal-title"></h3>
                    <p id="modal-desc"></p>
                    <div class="modal-price">$<span id="modal-price"></span></div>
                    <button id="modal-add" class="primary">Add to cart</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="site-footer">
        <div class="container">
            <small>Â© Minimal Shop â€” demo only. No real purchases.</small>
        </div>
    </footer>

    <script>
        // Sample product data
        const PRODUCTS = [
            { id: 1, title: 'Classic Tee', price: 24.00, img: 'https://picsum.photos/seed/p1/600/400', desc: 'Comfortable cotton tee â€” timeless fit.' },
            { id: 2, title: 'Everyday Sneakers', price: 79.00, img: 'https://picsum.photos/seed/p2/600/400', desc: 'Lightweight sneakers for daily wear.' },
            { id: 3, title: 'Leather Wallet', price: 49.50, img: 'https://picsum.photos/seed/p3/600/400', desc: 'Slim wallet in full-grain leather.' },
            { id: 4, title: 'Canvas Tote', price: 19.99, img: 'https://picsum.photos/seed/p4/600/400', desc: 'Durable tote for errands and work.' },
            { id: 5, title: 'Weekender Bag', price: 129.00, img: 'https://picsum.photos/seed/p5/600/400', desc: 'Spacious bag for quick trips.' },
            { id: 6, title: 'Sunglasses', price: 59.00, img: 'https://picsum.photos/seed/p6/600/400', desc: 'UV400 protection â€” stylish frames.' }
        ];

        // Cart state
        const cart = new Map(); // productId -> quantity

        // DOM
        const productsEl = document.getElementById('products');
        const cartCountEl = document.getElementById('cart-count');
        const cartDrawer = document.getElementById('cart-drawer');
        const cartItemsEl = document.getElementById('cart-items');
        const cartTotalEl = document.getElementById('cart-total');
        const cartButton = document.getElementById('cart-button');
        const closeCartBtn = document.getElementById('close-cart');
        const overlay = document.getElementById('overlay');
        const checkoutBtn = document.getElementById('checkout-btn');

        // Modal
        const modal = document.getElementById('product-modal');
        const modalImage = document.getElementById('modal-image');
        const modalTitle = document.getElementById('modal-title');
        const modalDesc = document.getElementById('modal-desc');
        const modalPrice = document.getElementById('modal-price');
        const modalAdd = document.getElementById('modal-add');
        const closeModal = document.getElementById('close-modal');

        let activeProduct = null;

        function formatPrice(v) { return v.toFixed(2); }

        function renderProducts() {
            productsEl.innerHTML = '';
            PRODUCTS.forEach(p => {
                const card = document.createElement('article');
                card.className = 'product-card';
                card.innerHTML = `
                    <button class="card-media" data-id="${p.id}" aria-label="View ${p.title}">
                        <img src="${p.img}" alt="${p.title}">
                    </button>
                    <div class="card-body">
                        <h3 class="card-title">${p.title}</h3>
                        <div class="card-price">$${formatPrice(p.price)}</div>
                        <button class="add-btn" data-id="${p.id}">Add to cart</button>
                    </div>
                `;
                productsEl.appendChild(card);
            });
        }

        function updateCartCount() {
            let count = 0;
            for (const qty of cart.values()) count += qty;
            cartCountEl.textContent = count;
        }

        function updateCartUI() {
            cartItemsEl.innerHTML = '';
            let total = 0;
            for (const [id, qty] of cart.entries()) {
                const p = PRODUCTS.find(x => x.id === id);
                const lineTotal = p.price * qty;
                total += lineTotal;
                const item = document.createElement('div');
                item.className = 'cart-item';
                item.innerHTML = `
                    <div class="item-info">
                        <strong>${p.title}</strong>
                        <div class="item-price">$${formatPrice(p.price)} x ${qty}</div>
                    </div>
                    <div class="item-actions">
                        <button class="qty-btn" data-id="${id}" data-op="-">âˆ’</button>
                        <button class="qty-btn" data-id="${id}" data-op="+">+</button>
                        <button class="remove-btn" data-id="${id}">Remove</button>
                    </div>
                `;
                cartItemsEl.appendChild(item);
            }
            cartTotalEl.textContent = formatPrice(total);
            updateCartCount();
        }

        function addToCart(productId, qty = 1) {
            const current = cart.get(productId) || 0;
            cart.set(productId, current + qty);
            updateCartUI();
        }

        function removeFromCart(productId) {
            cart.delete(productId);
            updateCartUI();
        }

        // Event delegation for product actions
        productsEl.addEventListener('click', (e) => {
            const addBtn = e.target.closest('.add-btn');
            const mediaBtn = e.target.closest('.card-media');
            if (addBtn) {
                const id = Number(addBtn.dataset.id);
                addToCart(id, 1);
                showCart();
            } else if (mediaBtn) {
                const id = Number(mediaBtn.dataset.id);
                openModal(id);
            }
        });

        // Cart interaction
        cartButton.addEventListener('click', showCart);
        closeCartBtn.addEventListener('click', hideCart);
        overlay.addEventListener('click', () => { hideCart(); closeProductModal(); });

        cartItemsEl.addEventListener('click', (e) => {
            const qtyBtn = e.target.closest('.qty-btn');
            const removeBtn = e.target.closest('.remove-btn');
            if (qtyBtn) {
                const id = Number(qtyBtn.dataset.id);
                const op = qtyBtn.dataset.op;
                const current = cart.get(id) || 0;
                if (op === '+') cart.set(id, current + 1);
                if (op === '-') {
                    if (current <= 1) cart.delete(id); else cart.set(id, current - 1);
                }
                updateCartUI();
            } else if (removeBtn) {
                const id = Number(removeBtn.dataset.id);
                removeFromCart(id);
            }
        });

        checkoutBtn.addEventListener('click', () => {
            if (cart.size === 0) {
                alert('Your cart is empty.');
                return;
            }
            // Simple mock checkout flow: confirm and clear
            const confirmed = confirm('Proceed to mock checkout?');
            if (confirmed) {
                cart.clear();
                updateCartUI();
                hideCart();
                alert('Thank you â€” this was a demo checkout.');
            }
        });

        function showCart() {
            cartDrawer.setAttribute('aria-hidden', 'false');
            cartDrawer.classList.add('open');
            overlay.hidden = false;
            document.body.classList.add('no-scroll');
        }
        function hideCart() {
            cartDrawer.setAttribute('aria-hidden', 'true');
            cartDrawer.classList.remove('open');
            overlay.hidden = true;
            document.body.classList.remove('no-scroll');
        }

        // Modal functions
        function openModal(id) {
            const p = PRODUCTS.find(x => x.id === id);
            if (!p) return;
            activeProduct = p;
            modalImage.src = p.img;
            modalImage.alt = p.title;
            modalTitle.textContent = p.title;
            modalDesc.textContent = p.desc;
            modalPrice.textContent = formatPrice(p.price);
            modal.setAttribute('aria-hidden', 'false');
            modal.classList.add('open');
            overlay.hidden = false;
            document.body.classList.add('no-scroll');
        }

        function closeProductModal() {
            activeProduct = null;
            modal.setAttribute('aria-hidden', 'true');
            modal.classList.remove('open');
            overlay.hidden = true;
            document.body.classList.remove('no-scroll');
        }

        closeModal.addEventListener('click', closeProductModal);
        modalAdd.addEventListener('click', () => {
            if (!activeProduct) return;
            addToCart(activeProduct.id, 1);
            closeProductModal();
            showCart();
        });

        // Initialize
        renderProducts();
        updateCartUI();
    </script>
</body>
</html>